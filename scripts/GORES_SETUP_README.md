# Gores æŠ•ç¥¨ç³»ç»Ÿè®¾ç½®æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä¸º DDNet æœåŠ¡å™¨å¯ç”¨ Gores æ¨¡å¼å’ŒæŠ•ç¥¨ç³»ç»Ÿã€‚

---

## ğŸ“‹ å·²å®Œæˆçš„å·¥ä½œ

### 1. ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„

```
txddnet/
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ gores.easy/
â”‚   â”‚   â”œâ”€â”€ flexvotes.cfg   (å·²ç”Ÿæˆ)
â”‚   â”‚   â”œâ”€â”€ votes.cfg        (å·²ç”Ÿæˆï¼Œ35 ä¸ªåœ°å›¾)
â”‚   â”‚   â””â”€â”€ flexreset.cfg    (å·²ç”Ÿæˆ)
â”‚   â”œâ”€â”€ gores.main/
â”‚   â”‚   â”œâ”€â”€ flexvotes.cfg   (å·²ç”Ÿæˆ)
â”‚   â”‚   â”œâ”€â”€ votes.cfg        (å·²ç”Ÿæˆï¼Œ328 ä¸ªåœ°å›¾)
â”‚   â”‚   â””â”€â”€ flexreset.cfg    (å·²ç”Ÿæˆ)
â”‚   â”œâ”€â”€ gores.hard/
â”‚   â”‚   â””â”€â”€ ...              (å·²ç”Ÿæˆï¼Œ260 ä¸ªåœ°å›¾)
â”‚   â”œâ”€â”€ gores.insane/
â”‚   â”‚   â””â”€â”€ ...              (å·²ç”Ÿæˆï¼Œ168 ä¸ªåœ°å›¾)
â”‚   â”œâ”€â”€ gores.extreme/
â”‚   â”‚   â””â”€â”€ ...              (å·²ç”Ÿæˆï¼Œ7 ä¸ªåœ°å›¾)
â”‚   â”œâ”€â”€ gores.mod/
â”‚   â”‚   â””â”€â”€ ...              (å·²ç”Ÿæˆï¼Œ34 ä¸ªåœ°å›¾)
â”‚   â”œâ”€â”€ gores.solo/
â”‚   â”‚   â””â”€â”€ ...              (å·²ç”Ÿæˆï¼Œ17 ä¸ªåœ°å›¾)
â”‚   â”‚
â”‚   â””â”€â”€ (æ‰€æœ‰ DDNet types çš„ flexvotes.cfg å·²æ›´æ–°)
â”‚
â””â”€â”€ scripts/
    â”œâ”€â”€ generate-gores-votes.ts       (ç”ŸæˆæŠ•ç¥¨é…ç½®çš„è„šæœ¬)
    â”œâ”€â”€ update-ddnet-flexvotes.ts     (æ›´æ–° DDNet flexvotes çš„è„šæœ¬)
    â”œâ”€â”€ generate-gores-maps-sql.ts    (ç”Ÿæˆæ•°æ®åº“ SQL çš„è„šæœ¬)
    â””â”€â”€ insert-gores-maps.sql         (849 ä¸ªåœ°å›¾çš„ SQL æ’å…¥è¯­å¥)
```

### 2. æŠ•ç¥¨èœå•ç»“æ„

ç©å®¶ç°åœ¨å¯ä»¥åœ¨æŠ•ç¥¨èœå•ä¸­çœ‹åˆ°ï¼š

```
â˜’ DDNet Maps         (æ€»å¼€å…³ - å½“å‰é€‰ä¸­)
â˜ Gores Maps         (æ€»å¼€å…³ - åˆ‡æ¢åˆ° Gores æ¨¡å¼)

â˜’ Novice Maps        (DDNet å­ç±»å‹)
â˜ Moderate Maps
â˜ Brutal Maps
...
```

åˆ‡æ¢åˆ° Gores æ¨¡å¼åï¼š

```
â˜ DDNet Maps         (æ€»å¼€å…³ - åˆ‡æ¢å› DDNet)
â˜’ Gores Maps         (æ€»å¼€å…³ - å½“å‰é€‰ä¸­)

â˜’ Gores Main         (Gores å­éš¾åº¦ - å½“å‰é€‰ä¸­)
â˜ Gores Easy
â˜ Gores Hard
â˜ Gores Insane
â˜ Gores Extreme
â˜ Gores Mod
â˜ Gores Solo

Random Gores Main Map (Reason=Stars)
Random Gores Main Map Unfinished by Vote Caller (Reason=Stars)
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: æ›´æ–°æ•°æ®åº“

#### é€‰é¡¹ A: ä½¿ç”¨ç”Ÿæˆçš„ SQL è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. æŸ¥çœ‹å¹¶æ ¹æ®éœ€è¦ç¼–è¾‘ SQL è„šæœ¬
# å¯ä»¥ä¿®æ”¹åœ°å›¾ä½œè€…ï¼ˆMapperï¼‰ã€ç§¯åˆ†ï¼ˆPointsï¼‰ã€æ˜Ÿçº§ï¼ˆStarsï¼‰
nano scripts/insert-gores-maps.sql

# 2. å¯¼å…¥åˆ°æ•°æ®åº“
# MySQL:
mysql -u your_username -p your_database < scripts/insert-gores-maps.sql

# SQLite:
sqlite3 path/to/your/database.db < scripts/insert-gores-maps.sql
```

#### é€‰é¡¹ B: æ‰‹åŠ¨åˆ›å»ºï¼ˆå¦‚æœéœ€è¦è‡ªå®šä¹‰ï¼‰

```sql
-- ç¡®ä¿ gores_maps è¡¨å·²å­˜åœ¨ï¼ˆå·²ç”±ä»£ç è‡ªåŠ¨åˆ›å»ºï¼‰
-- æ’å…¥ç¤ºä¾‹åœ°å›¾
INSERT INTO gores_maps (Map, Server, Mapper, Points, Stars) VALUES
('001', 'Gores_Main', 'Unknown', 10, 3),
('4Apfelsaft', 'Gores_Main', 'Unknown', 10, 3),
... -- æ›´å¤šåœ°å›¾
```

### æ­¥éª¤ 2: éªŒè¯æ•°æ®åº“

```sql
-- æ£€æŸ¥åœ°å›¾æ•°é‡
SELECT Server, COUNT(*) as Count
FROM gores_maps
GROUP BY Server;

-- åº”è¯¥çœ‹åˆ°ï¼š
-- Gores_Easy: 35
-- Gores_Main: 328
-- Gores_Hard: 260
-- Gores_Insane: 168
-- Gores_Extreme: 7
-- Gores_Mod: 34
-- Gores_Solo: 17

-- æ£€æŸ¥æ ·ä¾‹æ•°æ®
SELECT * FROM gores_maps LIMIT 5;
```

### æ­¥éª¤ 3: é‡å¯æœåŠ¡å™¨

```bash
# é‡å¯ DDNet æœåŠ¡å™¨ä»¥åŠ è½½æ–°é…ç½®
# å…·ä½“å‘½ä»¤å–å†³äºä½ çš„æœåŠ¡å™¨ç®¡ç†æ–¹å¼
systemctl restart ddnet-server
# æˆ–
./DDNet-Server
```

### æ­¥éª¤ 4: æµ‹è¯•æŠ•ç¥¨åŠŸèƒ½

1. **è¿›å…¥æœåŠ¡å™¨**
2. **æ‰“å¼€æŠ•ç¥¨èœå•** (`Esc` â†’ `Call vote`)
3. **éªŒè¯ DDNet/Gores æ€»å¼€å…³æ˜¯å¦æ˜¾ç¤º**
4. **åˆ‡æ¢åˆ° Gores æ¨¡å¼**
5. **éªŒè¯ Gores å­éš¾åº¦æ˜¯å¦æ­£ç¡®æ˜¾ç¤º**
6. **æµ‹è¯•åˆ‡æ¢ä¸åŒ Gores éš¾åº¦**
7. **æµ‹è¯• Random Map åŠŸèƒ½**

---

## âš™ï¸ é…ç½®è¯´æ˜

### Server Type æ˜ å°„

| éš¾åº¦ç­‰çº§ | sv_server_type | é»˜è®¤æ˜Ÿçº§ | é»˜è®¤ç§¯åˆ† | åœ°å›¾æ•°é‡ |
|---------|---------------|---------|---------|---------|
| Easy | `Gores_Easy` | 2 | 5 | 35 |
| Main | `Gores_Main` | 3 | 10 | 328 |
| Hard | `Gores_Hard` | 4 | 15 | 260 |
| Insane | `Gores_Insane` | 5 | 20 | 168 |
| Extreme | `Gores_Extreme` | 5 | 25 | 7 |
| Mod | `Gores_Mod` | 3 | 10 | 34 |
| Solo | `Gores_Solo` | 3 | 10 | 17 |

### Random Map å·¥ä½œåŸç†

`random_map` å‘½ä»¤ä¼šï¼š
1. è¯»å–å½“å‰çš„ `sv_server_type`ï¼ˆä¾‹å¦‚ `Gores_Main`ï¼‰
2. ä» `gores_maps` è¡¨ä¸­æŸ¥è¯¢ `WHERE Server = 'Gores_Main'`
3. æ ¹æ®æ˜Ÿçº§å‚æ•°è¿‡æ»¤ï¼ˆå¦‚æœæä¾›ï¼‰
4. éšæœºé€‰æ‹©ä¸€ä¸ªåœ°å›¾
5. è‡ªåŠ¨åˆ‡æ¢åˆ°è¯¥åœ°å›¾

**ç¤ºä¾‹æŠ•ç¥¨ï¼š**
- æŠ•ç¥¨ï¼š`Random Gores Main Map`ï¼ŒåŸå› ï¼š`3`
- æ‰§è¡Œï¼š`random_map 3`
- SQL: `SELECT Map FROM gores_maps WHERE Server='Gores_Main' AND Stars=3 ORDER BY RAND() LIMIT 1`

---

## ğŸ”§ è‡ªå®šä¹‰å’Œç»´æŠ¤

### é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶

å¦‚æœæ·»åŠ äº†æ–°çš„ Gores åœ°å›¾ï¼š

```bash
cd txddnet/scripts

# 1. å°†æ–°åœ°å›¾æ–‡ä»¶æ”¾å…¥å¯¹åº”çš„ gores/ å­æ–‡ä»¶å¤¹
# 2. é‡æ–°è¿è¡Œç”Ÿæˆè„šæœ¬
bun run generate-gores-votes.ts
bun run generate-gores-maps-sql.ts

# 3. å¯¼å…¥æ–°åœ°å›¾åˆ°æ•°æ®åº“
# ... (å‚è€ƒæ­¥éª¤ 1)
```

### ä¿®æ”¹åœ°å›¾ä¿¡æ¯

```sql
-- æ›´æ–°ç‰¹å®šåœ°å›¾çš„æ˜Ÿçº§
UPDATE gores_maps SET Stars = 4 WHERE Map = '001';

-- æ›´æ–°ç‰¹å®šåœ°å›¾çš„ç§¯åˆ†
UPDATE gores_maps SET Points = 15 WHERE Map = '001';

-- æ›´æ–°ç‰¹å®šåœ°å›¾çš„ä½œè€…
UPDATE gores_maps SET Mapper = 'çœŸå®ä½œè€…å' WHERE Map = '001';

-- æ‰¹é‡æ›´æ–°æŸä¸ªéš¾åº¦çš„ç§¯åˆ†
UPDATE gores_maps SET Points = 12 WHERE Server = 'Gores_Main';
```

### æ·»åŠ æ–°çš„ Gores éš¾åº¦

å¦‚æœéœ€è¦æ·»åŠ æ–°çš„éš¾åº¦çº§åˆ«ï¼ˆä¾‹å¦‚ `Gores_Ultra`ï¼‰ï¼š

1. **ç¼–è¾‘** `scripts/generate-gores-votes.ts`
2. **æ·»åŠ **æ–°éš¾åº¦é…ç½®åˆ° `GORES_DIFFICULTIES` æ•°ç»„
3. **é‡æ–°è¿è¡Œ**æ‰€æœ‰ç”Ÿæˆè„šæœ¬
4. **æ›´æ–°**æ•°æ®åº“

---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

**æ€»è®¡ï¼š**
- Gores éš¾åº¦ç±»å‹ï¼š7 ä¸ª
- Gores åœ°å›¾æ€»æ•°ï¼š849 ä¸ª
- ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼š21 ä¸ªï¼ˆ7ä¸ªéš¾åº¦ Ã— 3ä¸ªæ–‡ä»¶ï¼‰
- æ›´æ–°çš„ DDNet é…ç½®ï¼š14 ä¸ªï¼ˆåŒ…æ‹¬ ddmax.* ç³»åˆ—ï¼‰

---

## â“ å¸¸è§é—®é¢˜

### Q1: Random map ä¸å·¥ä½œï¼Ÿ

**æ£€æŸ¥ï¼š**
1. æ•°æ®åº“ä¸­ `Server` å­—æ®µæ˜¯å¦æ­£ç¡®è®¾ç½®
2. å½“å‰ `sv_server_type` æ˜¯å¦åŒ¹é…
3. SQL æŸ¥è¯¢æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯

```bash
# å¯ç”¨ SQL è°ƒè¯•
sv_sql_debug 1
```

### Q2: æŠ•ç¥¨èœå•æ˜¾ç¤ºä¹±ç ï¼Ÿ

**åŸå› ï¼š** é…ç½®æ–‡ä»¶ç¼–ç é—®é¢˜

**è§£å†³ï¼š**
```bash
# ç¡®ä¿é…ç½®æ–‡ä»¶æ˜¯ UTF-8 ç¼–ç 
file -I types/gores.main/flexvotes.cfg
# åº”è¯¥æ˜¾ç¤º: charset=utf-8
```

### Q3: å¦‚ä½•åªå¯ç”¨éƒ¨åˆ† Gores éš¾åº¦ï¼Ÿ

**ç¼–è¾‘** `types/gores.main/flexvotes.cfg`ï¼Œåˆ é™¤æˆ–æ³¨é‡Šä¸éœ€è¦çš„éš¾åº¦é€‰é¡¹ï¼š

```cfg
# æ³¨é‡Šæ‰ä¸éœ€è¦çš„éš¾åº¦
# add_vote "â˜ Gá´Ê€á´‡s Exá´›Ê€á´‡á´á´‡" "..."
```

### Q4: ç§¯åˆ†ç³»ç»Ÿæ˜¯å¦è‡ªåŠ¨å·¥ä½œï¼Ÿ

**æ˜¯çš„ï¼** ä¹‹å‰å·²å®ç°çš„ Gores ç§¯åˆ†ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥å®Œæˆçš„åœ°å›¾æ˜¯å¦åœ¨ `gores_maps` è¡¨ä¸­
2. å¦‚æœæ˜¯ Gores åœ°å›¾ï¼Œç§¯åˆ†æ·»åŠ åˆ° `gores_points` è¡¨
3. `/points` å‘½ä»¤åŒæ—¶æ˜¾ç¤º DDNet å’Œ Gores ç§¯åˆ†

### Q5: å¦‚ä½•é‡ç½®å› DDNet æ¨¡å¼ï¼Ÿ

ç©å®¶æŠ•ç¥¨é€‰æ‹© "â˜ DDNet Maps" å³å¯åˆ‡æ¢å› DDNet æ¨¡å¼ã€‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **è·å–çœŸå®çš„åœ°å›¾ä½œè€…ä¿¡æ¯**
   - ä»å®˜æ–¹ Gores æœåŠ¡å™¨è·å–
   - æˆ–ä»åœ°å›¾æ–‡ä»¶ä¸­æå–

2. **è°ƒæ•´æ˜Ÿçº§å’Œç§¯åˆ†**
   - æ ¹æ®å®é™…éš¾åº¦è°ƒæ•´
   - å¯å‚è€ƒç¤¾åŒºåé¦ˆ

3. **æ·»åŠ åœ°å›¾åˆ†ç±»**
   - åœ¨ `votes.cfg` ä¸­æ·»åŠ åˆ†éš”ç¬¦
   - ä¾‹å¦‚ï¼š`â”€â”€â”€ NEW MAPS â”€â”€â”€`

4. **ç›‘æ§å’Œä¼˜åŒ–**
   - æŸ¥çœ‹å“ªäº›åœ°å›¾æœ€å—æ¬¢è¿
   - æ ¹æ®å®Œæˆç‡è°ƒæ•´éš¾åº¦è¯„çº§

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€ä¿®æ”¹æˆ–è°ƒæ•´é…ç½®ï¼Œå¯ä»¥ï¼š
1. ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶
2. ä¿®æ”¹å¹¶é‡æ–°è¿è¡Œç”Ÿæˆè„šæœ¬
3. æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“

æ‰€æœ‰è„šæœ¬éƒ½åœ¨ `txddnet/scripts/` ç›®å½•ä¸‹ï¼Œä½¿ç”¨ Bun TypeScript ç¼–å†™ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹ã€‚

---

**ç”Ÿæˆæ—¶é—´ï¼š** 2025-11-20
**ç‰ˆæœ¬ï¼š** 1.0
